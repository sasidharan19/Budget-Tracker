<div class="min-h-screen bg-indigo-50 flex justify-center py-10">
  <div class="w-full max-w-2xl bg-white shadow-xl rounded-2xl p-8">
    <!-- Header -->
    <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">
      {{ isEdit ? 'Edit Transaction' : 'Add New Transaction' }}
    </h2>

    <!-- No categories fallback -->
    <div *ngIf="noCategories" class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6 rounded">
      <p class="text-yellow-700 mb-3">
        You donâ€™t have any categories yet. Add one below or
        <a routerLink="/categories" class="text-blue-600 underline">visit the Categories page</a>.
      </p>

      <!-- Inline Add Category Form -->
      <form [formGroup]="categoryForm" (ngSubmit)="addCategoryInline()" class="flex flex-col sm:flex-row gap-2">
        <input
          type="text"
          formControlName="name"
          placeholder="Category name"
          class="border p-2 rounded flex-1"
        />
        <select formControlName="type" class="border p-2 rounded">
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
        <button
          type="submit"
          [disabled]="categoryForm.invalid"
          class="bg-blue-500 text-white px-4 py-2 rounded"
        >
          Add
        </button>
      </form>
    </div>

    <!-- Main Transaction Form -->
    <form *ngIf="!noCategories" [formGroup]="form" (ngSubmit)="submit()" class="space-y-5">
      <!-- Category -->
      <div>
        <label class="block text-gray-700 font-medium mb-1">Category</label>
        <select
          formControlName="categoryId"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        >
          <option value="" disabled selected>Select a category</option>
          <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
        </select>
      </div>

      <!-- Type -->
      <div>
        <label class="block text-gray-700 font-medium mb-1">Type</label>
        <select
          formControlName="type"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        >
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
      </div>

      <!-- Amount -->
      <div>
        <label class="block text-gray-700 font-medium mb-1">Amount</label>
        <input
          type="number"
          step="0.01"
          formControlName="amount"
          placeholder="Enter amount"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        />
      </div>

      <!-- Date -->
      <div>
        <label class="block text-gray-700 font-medium mb-1">Date</label>
        <input
          type="date"
          formControlName="date"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none"
        />
      </div>

      <!-- Description -->
      <div>
        <label class="block text-gray-700 font-medium mb-1">Description</label>
        <textarea
          formControlName="description"
          rows="3"
          placeholder="Enter a short description"
          class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:outline-none resize-none"
        ></textarea>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-3 pt-4">
        <button
          type="button"
          (click)="cancel()"
          class="px-5 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-100 transition"
        >
          Cancel
        </button>
        <button
          type="submit"
          [disabled]="form.invalid || loading"
          class="px-5 py-2 rounded-lg bg-indigo-600 text-white font-semibold hover:bg-indigo-700 disabled:opacity-50 transition"
        >
          {{ isEdit ? 'Update Transaction' : 'Save Transaction' }}
        </button>
      </div>
    </form>
  </div>
</div>
